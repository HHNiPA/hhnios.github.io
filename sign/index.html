<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>iPA Sign - Công cụ ký iPA online không cần macOS</title>
    <meta name="Keywords" content="ký ipa, ký ipa online, ký ipa trực tuyến, sign ipa, sign ipa online, sign ipa trực tuyến" />
    <meta name="description" content="Công cụ ký ipa online không cần macOS, không cần jailbreak" />
    <meta property="og:image" content="https://sign.icert.cc/og.jpeg" />
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        function onSubmit(token) {
            document.getElementById("upload").submit();
        }
    </script>
</head>

<body>
    <nav class="navbar navbar-dark bg-info navbar-expand-lg"><a href="https://sign.icert.cc" target="_self" class="navbar-brand">iPA Sign</a></nav>
    <div class="container mt-5">
        <div role="alert" aria-live="polite" aria-atomic="true" class="alert alert-dismissible alert-info">
            <h4 class="alert-heading">Công cụ ký iPA online không cần macOS (thử nghiệm)</h4>
            <p>Nhập đầy đủ thông tin yêu cầu và bấm <span class="badge badge-secondary">Sign now!</span>:</p>
            <ul>
                <li>File iPA đúng định dạng, không có ký tự đặc biệt (dung lượng tối đa 350 MB),</li>
                <li>File p12 và mật khẩu,</li>
                <li>File mobileprovision.</li>
            </ul>
            <p>Để đảm bảo việc cài đặt thành công trên iOS/iPadOS 16, vui lòng nhập vào ô "bundle identifier".</p>
            <p>File iPA sau khi ký sẽ tồn tại 15 phút trước khi bị xóa vì dung lượng lưu trữ có giới hạn.</p>
            <p>Tham gia nhóm telegram: <span class="badge badge-secondary"> <a href="https://t.me/+1qK9KUZlfGs3ZDg1" style="color:white;">https://t.me/+1qK9KUZlfGs3ZDg1</a> </span></p>
        </div>

        <div class="card">
            <form method="POST" enctype="multipart/form-data" id="upload">
                <div class="card-body" id="step1">
                    <h4 class="card-title">Bước 1: Upload files</h4>
                    <div class="row mb-3">
                        <div class="col-sm-12">
                            <div class="custom-file">
                                <input type="file" required="required" accept=".ipa" aria-required="true" name="ipa" id="ipa" class="custom-file-input is-invalid" style="z-index: -5;" />
                                <label data-browse="Chọn" for="ipa" class="custom-file-label"><span class="d-block form-file-text" style="pointer-events: none;">Chọn file .ipa</span></label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 mb-3">
                            <div class="custom-file b-form-file is-invalid is-invalid">
                                <input type="file" required="required" accept=".p12" aria-required="true" name="p12" id="p12" class="custom-file-input is-invalid" style="z-index: -5;" />
                                <label data-browse="Chọn" for="p12" class="custom-file-label"><span class="d-block form-file-text" style="pointer-events: none;">Chọn file .p12</span></label>
                            </div>
                        </div>
                        <div class="col-sm-6 mb-3"><input type="text" placeholder="Nhập mật khẩu .p12" name="password" required="required" aria-required="true" aria-invalid="true" id="password" class="form-control is-invalid" /></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-12">
                            <div class="custom-file b-form-file is-invalid">
                                <input type="file" required="required" accept=".mobileprovision" name="mobileprovision" aria-required="true" id="mobileprovision" class="custom-file-input is-invalid" style="z-index: -5;" />
                                <label data-browse="Chọn" for="mobileprovision" class="custom-file-label"><span class="d-block form-file-text" style="pointer-events: none;">Chọn file .mobileprovision</span></label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 mb-3"><input type="text" placeholder="Nhập bundle identifier mới" name="identifier" id="identifier" class="form-control" /></div>
                        <div class="col-sm-6 mb-3"><input type="text" placeholder="Nhập bundle name mới" name="name" id="name" class="form-control" /></div>
                    </div>

                    <button class="btn btn-primary btn-block">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="signature" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height: 20px;">
                            <path
                                fill="currentColor"
                                d="M623.2 192c-51.8 3.5-125.7 54.7-163.1 71.5-29.1 13.1-54.2 24.4-76.1 24.4-22.6 0-26-16.2-21.3-51.9 1.1-8 11.7-79.2-42.7-76.1-25.1 1.5-64.3 24.8-169.5 126L192 182.2c30.4-75.9-53.2-151.5-129.7-102.8L7.4 116.3C0 121-2.2 130.9 2.5 138.4l17.2 27c4.7 7.5 14.6 9.7 22.1 4.9l58-38.9c18.4-11.7 40.7 7.2 32.7 27.1L34.3 404.1C27.5 421 37 448 64 448c8.3 0 16.5-3.2 22.6-9.4 42.2-42.2 154.7-150.7 211.2-195.8-2.2 28.5-2.1 58.9 20.6 83.8 15.3 16.8 37.3 25.3 65.5 25.3 35.6 0 68-14.6 102.3-30 33-14.8 99-62.6 138.4-65.8 8.5-.7 15.2-7.3 15.2-15.8v-32.1c.2-9.1-7.5-16.8-16.6-16.2z"
                            ></path>
                        </svg>
                        Sign now!
                    </button>
                </div>
            </form>

            <div class="card-body" style="display: none;" id="step2">
                <h4 class="card-title">Bước 2: Upload và Sign</h4>
                <div class="progress">
                    <div id="progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{ progressBar }}" class="progress-bar bg-success progress-bar-striped progress-bar-animated" style="width: 0%;"><strong>0%</strong></div>
                </div>
            </div>

            <div class="card-body" style="display: none;" id="step3">
                <h4 class="card-title">Bước 3: Cài đặt</h4>
                <div class="row">
                    <div class="col-sm mt-3">
                        <h6>Sử dụng camera quét mã QR để cài đặt.</h6>
                        <img src="" id="qrcode">
                    </div>
                    <div class="col-sm mt-3">
                        <h6>Tải file iPA đã ký</h6>
                        <div><a href="" id="ipa-url">Download iPA</a></div>

                    </div>
                </div>
                <div>
                    <a href="https://sign.icert.cc">
                        <button type="button" class="btn mt-3 btn-primary btn-block">Bắt đầu lại</button>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Show upload filename
        $('input[type="file"]').on('change', function() {
            let fileName = $(this).val();
            $(this).next('.custom-file-label').html(fileName);
        })

        $('input').on('change', function() {
            $(this).removeClass('is-invalid').addClass('is-valid');
        })

        // Upload process
        $("#upload").on('submit', function(e) {
            e.preventDefault();
            $.ajax({
                xhr: function() {
                    var xhr = new window.XMLHttpRequest();
                    xhr.upload.addEventListener("progress", function(evt) {
                        if (evt.lengthComputable) {
                            let percentComplete = Math.floor((evt.loaded / evt.total) * 100);

                            $('#progressbar').width(percentComplete + '%')
                            $('#progressbar').html('<strong>' + percentComplete + '%</strong>')
                        }
                    }, false);
                    return xhr;
                },
                type: 'POST',
                url: 'upload.php',
                data: new FormData(this),
                contentType: false,
                cache: false,
                processData: false,
                beforeSend: function() {
                    $(".card-body").hide()
                    $('#step2').show()
                    $('#progressbar').width('0%')
                    $('#progressbar').html('<strong>0%</strong>')
                },
                error: function() {
                    $(".card-body").hide()
                    $('#step1').show()
                    alert('File upload failed, please try again.');
                },
                success: function(res) {
                    if (res.success === true) {
                        $('.card-body').hide()
                        $('#step3').show()

                        $('#ipa-url').attr('href', res.ipa_url);
                        $('#install-url').attr('href', res.install_url);
                        $('#qrcode').attr('src', 'https://chart.googleapis.com/chart?chs=240x240&cht=qr&chl=' + encodeURIComponent(res.install_url) + '&choe=UTF-8')
                    } else {
                        $('.card-body').hide()
                        $('#step1').show()
                        alert(res.message)
                    }
                }
            });
        });
    </script>

    <div class="g-recaptcha" data-sitekey="6LcYo6AUAAAAAFjddWYMFHT4jG4bpH05zZWyNOKq" data-callback="onSubmit" data-size="invisible">
    </div>

    <div class="container">
        <footer class="py-3 my-4">
            <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                <li class="nav-item"><a href="https://icert.cc" class="nav-link px-2 text-muted">iCert.cc</a></li>
                <li class="nav-item"><a href="https://ios.codevn.net" class="nav-link px-2 text-muted">iOS CodeVN</a></li>
                <li class="nav-item"><a href="https://namlee.net" class="nav-link px-2 text-muted">NamLee Blog</a></li>
                <li class="nav-item"><a href="https://ipatool.codevn.net" class="nav-link px-2 text-muted">ipatool-web</a></li>
                <li class="nav-item"><a href="https://ipacrack.com" class="nav-link px-2 text-muted">iPACrack</a></li>
            </ul>
            <p class="text-center text-muted">©2022 iCert | Một sản phẩm thuộc iOS CodeVN</p>
        </footer>
    </div>
</body>

</html>